import { useEffect, useRef, useState } from "react";
import { ChevronDown, ChevronUp, MessageCircle } from "lucide-react";
import { Button } from "@/components/ui/button";

const FAQSection = () => {
  const sectionRef = useRef<HTMLElement>(null);
  const [openFAQ, setOpenFAQ] = useState<number | null>(0);

  useEffect(() => {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate');
          }
        });
      },
      { threshold: 0.1 }
    );

    const elements = sectionRef.current?.querySelectorAll('.fade-in-up');
    elements?.forEach((el) => observer.observe(el));

    return () => observer.disconnect();
  }, []);

  const faqs = [
    {
      question: "ü§ñ –ß—Ç–æ —Ç–∞–∫–æ–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–∞–π—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é –ò–ò?",
      answer: "–≠—Ç–æ —Å–æ–∑–¥–∞–Ω–∏–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ –∏ –ª–µ–Ω–¥–∏–Ω–≥–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π. –ò–ò –ø–æ–º–æ–≥–∞–µ—Ç —É—Å–∫–æ—Ä–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É, —Å–æ–∑–¥–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –≤—Å—ë —ç—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –∏ –¥–æ—Å—Ç—É–ø–Ω–µ–µ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π —Å–∞–π—Ç, –∞ –Ω–µ —à–∞–±–ª–æ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ.",
      highlight: "–£–Ω–∏–∫–∞–ª—å–Ω—ã–π —Å–∞–π—Ç –∑–∞ –¥–Ω–∏, –∞ –Ω–µ –º–µ—Å—è—Ü—ã"
    },
    {
      question: "üë• –ö–æ–º—É –ø–æ–¥–æ–π–¥—É—Ç –ò–ò-—Å–∞–π—Ç—ã?",
      answer: "‚Ä¢ –ú–∞–ª–æ–º—É –∏ —Å—Ä–µ–¥–Ω–µ–º—É –±–∏–∑–Ω–µ—Å—É\n‚Ä¢ –°—Ç–∞—Ä—Ç–∞–ø–∞–º, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–µ–Ω MVP\n‚Ä¢ –§—Ä–∏–ª–∞–Ω—Å–µ—Ä–∞–º –∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º –¥–ª—è –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ\n‚Ä¢ –ö–æ–º–ø–∞–Ω–∏—è–º, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–µ–Ω –ª–µ–Ω–¥–∏–Ω–≥ –¥–ª—è —Ä–µ–∫–ª–∞–º—ã\n‚Ä¢ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω–∞–º –∏ —Å–µ—Ä–≤–∏—Å–∞–º\n‚Ä¢ –í—Å–µ–º, –∫—Ç–æ —Ö–æ—á–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∞–π—Ç –±–µ–∑ –ø–µ—Ä–µ–ø–ª–∞—Ç\n\n–ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–µ–Ω —Å–∞–π—Ç –±—ã—Å—Ç—Ä–æ, –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ –∏ –ø–æ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ–π —Ü–µ–Ω–µ ‚Äî —ç—Ç–æ –¥–ª—è –≤–∞—Å.",
      highlight: "–î–ª—è –±–∏–∑–Ω–µ—Å–∞ –ª—é–±–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∞"
    },
    {
      question: "üé® –ö–∞–∫–∏–µ —É—Å–ª—É–≥–∏ –≤—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç–µ?",
      answer: "‚Ä¢ –°–∞–π—Ç—ã-–≤–∏–∑–∏—Ç–∫–∏ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞\n‚Ä¢ –õ–µ–Ω–¥–∏–Ω–≥–∏ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ —É—Å–ª—É–≥\n‚Ä¢ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–∞–π—Ç—ã\n‚Ä¢ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—ã –∏ –∫–∞—Ç–∞–ª–æ–≥–∏\n‚Ä¢ –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ –∏ –ª–∏—á–Ω—ã–µ —Å–∞–π—Ç—ã\n‚Ä¢ –†–µ–¥–∏–∑–∞–π–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∞–π—Ç–æ–≤\n‚Ä¢ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM, –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π, –ø–ª–∞—Ç–µ–∂–∞–º–∏",
      highlight: "–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"
    },
    {
      question: "‚è±Ô∏è –ö–∞–∫ –±—ã—Å—Ç—Ä–æ –ø–æ–ª—É—á—É –≥–æ—Ç–æ–≤—ã–π —Å–∞–π—Ç?",
      answer: "–°—Ä–æ–∫–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞:\n‚Ä¢ –û–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –ª–µ–Ω–¥–∏–Ω–≥ ‚Äî 3-5 –¥–Ω–µ–π\n‚Ä¢ –°–∞–π—Ç-–≤–∏–∑–∏—Ç–∫–∞ (–¥–æ 5 —Å—Ç—Ä–∞–Ω–∏—Ü) ‚Äî 5-7 –¥–Ω–µ–π\n‚Ä¢ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–∞–π—Ç ‚Äî 10-14 –¥–Ω–µ–π\n‚Ä¢ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω ‚Äî 14-21 –¥–µ–Ω—å\n‚Ä¢ –°–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã ‚Äî –æ–±—Å—É–∂–¥–∞–µ—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ\n\n–°—Ä–æ—á–Ω—ã–µ –∑–∞–∫–∞–∑—ã –≤–æ–∑–º–æ–∂–Ω—ã –∑–∞ –¥–æ–ø–ª–∞—Ç—É!",
      highlight: "–û—Ç 3 –¥–Ω–µ–π"
    },
    {
      question: "üí∞ –°–∫–æ–ª—å–∫–æ —Å—Ç–æ—è—Ç –≤–∞—à–∏ —É—Å–ª—É–≥–∏?",
      answer: "–¶–µ–Ω—ã –∑–∞–≤–∏—Å—è—Ç –æ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:\n‚Ä¢ –õ–µ–Ω–¥–∏–Ω–≥ ‚Äî –æ—Ç 50 000‚ÇΩ\n‚Ä¢ –°–∞–π—Ç-–≤–∏–∑–∏—Ç–∫–∞ ‚Äî –æ—Ç 70 000‚ÇΩ\n‚Ä¢ –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–∞–π—Ç ‚Äî –æ—Ç 120 000‚ÇΩ\n‚Ä¢ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω ‚Äî –æ—Ç 150 000‚ÇΩ\n‚Ä¢ –†–µ–¥–∏–∑–∞–π–Ω ‚Äî –æ—Ç 40 000‚ÇΩ\n\n–≠—Ç–æ –≤ 2-3 —Ä–∞–∑–∞ –¥–µ—à–µ–≤–ª–µ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏ —Ç–æ–º –∂–µ –∫–∞—á–µ—Å—Ç–≤–µ!",
      highlight: "–ß–µ—Å—Ç–Ω—ã–µ —Ü–µ–Ω—ã –±–µ–∑ –ø–µ—Ä–µ–ø–ª–∞—Ç"
    },
    {
      question: "üîÑ –ú–æ–∂–Ω–æ –ª–∏ –≤–Ω–µ—Å—Ç–∏ –ø—Ä–∞–≤–∫–∏ –≤ –≥–æ—Ç–æ–≤—ã–π —Å–∞–π—Ç?",
      answer: "–î–∞! –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç:\n‚Ä¢ –û–±—Å—É–∂–¥–µ–Ω–∏–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å–∞–π—Ç–∞\n‚Ä¢ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–∞–∫–µ—Ç—ã –Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ\n‚Ä¢ 2 —Ä–∞—É–Ω–¥–∞ –ø—Ä–∞–≤–æ–∫ –≤–∫–ª—é—á–µ–Ω—ã –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å\n‚Ä¢ –í–Ω–æ—Å–∏–º –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏ –¥–æ –≤–∞—à–µ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è\n‚Ä¢ –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤–∞—à–µ–≥–æ \"–û–ö\"\n\n–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –ø–æ–º–æ–≥–∞–µ–º —Å –¥–æ—Ä–∞–±–æ—Ç–∫–∞–º–∏.",
      highlight: "–ü—Ä–∞–≤–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã –≤ —Å—Ç–æ–∏–º–æ—Å—Ç—å"
    },
    {
      question: "üåê –ë—É–¥–µ—Ç –ª–∏ –º–æ–π —Å–∞–π—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–ª–∏ —ç—Ç–æ —à–∞–±–ª–æ–Ω?",
      answer: "–ö–∞–∂–¥—ã–π —Å–∞–π—Ç —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –ø–æ–¥ –≤–∞—à –±–∏–∑–Ω–µ—Å –∏ –∑–∞–¥–∞—á–∏. –ú—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã —Ç–∏–ø–∞ Tilda –∏–ª–∏ Wix.\n\n–í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ:\n‚Ä¢ –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω –ø–æ–¥ –≤–∞—à –±—Ä–µ–Ω–¥\n‚Ä¢ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–¥ –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏\n‚Ä¢ –ê–¥–∞–ø—Ç–∏–≤–Ω—É—é –≤–µ—Ä—Å—Ç–∫—É –ø–æ–¥ –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞\n‚Ä¢ –ë—ã—Å—Ç—Ä—É—é –∑–∞–≥—Ä—É–∑–∫—É –∏ SEO-–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é\n‚Ä¢ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ª—é–±—ã—Ö –¥–æ—Ä–∞–±–æ—Ç–æ–∫ –≤ –±—É–¥—É—â–µ–º",
      highlight: "100% —É–Ω–∏–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞"
    },
    {
      question: "üöÄ –ö–∞–∫ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É?",
      answer: "–í—Å–µ–≥–æ 4 –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞:\n1. –ù–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –∏–ª–∏ Telegram\n2. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ –ø—Ä–æ–µ–∫—Ç–µ: —Ü–µ–ª–∏, —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª, —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ã\n3. –ü–æ–ª—É—á–∏—Ç–µ —Ä–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –ø–ª–∞–Ω —Ä–∞–±–æ—Ç—ã\n4. –°–æ–≥–ª–∞—Å—É–π—Ç–µ –¥–µ—Ç–∞–ª–∏ –∏ –º—ã –ø—Ä–∏—Å—Ç—É–ø–∏–º –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ\n\n–ú–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏, —á—Ç–æ–±—ã –æ–±—Å—É–¥–∏—Ç—å –≤—Å–µ –¥–µ—Ç–∞–ª–∏!",
      highlight: "–ü–µ—Ä–≤—ã–π –æ—Ç–≤–µ—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞"
    }
  ];

  const handleFAQClick = (index: number) => {
    setOpenFAQ(openFAQ === index ? null : index);
  };

  const handleContactClick = () => {
    document.getElementById('contacts')?.scrollIntoView({ 
      behavior: 'smooth' 
    });
  };

  return (
    <section ref={sectionRef} className="py-20 bg-background">
      <div className="container mx-auto px-4">
        <div className="max-w-4xl mx-auto">
          {/* Section header */}
          <div className="text-center mb-16">
            <h2 className="fade-in-up text-4xl md:text-5xl font-bold text-foreground mb-6">
              –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã
            </h2>
            
            <p className="fade-in-up text-xl text-muted-foreground max-w-3xl mx-auto mb-8">
              –û—Ç–≤–µ—Ç—ã –Ω–∞ –≥–ª–∞–≤–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–∞–π—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é –ò–ò
            </p>

            <div className="fade-in-up">
              <Button
                onClick={handleContactClick}
                className="gap-2 hover:bg-primary active:bg-primary"
                size="lg"
              >
                <MessageCircle className="w-5 h-5" />
                –ó–∞–¥–∞—Ç—å —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å
              </Button>
            </div>
          </div>

          {/* FAQ List */}
          <div className="space-y-4">
            {faqs.map((faq, index) => (
              <div 
                key={index}
                className="fade-in-up bg-card border border-border rounded-xl overflow-hidden shadow-soft hover:shadow-medium transition-smooth"
                style={{ animationDelay: `${index * 0.1}s` }}
              >
                <button
                  className="w-full px-6 py-5 text-left flex items-center justify-between hover:bg-muted/50 transition-smooth"
                  onClick={() => handleFAQClick(index)}
                >
                  <div className="flex-1">
                    <h3 className="text-lg font-semibold text-foreground pr-4">
                      {faq.question}
                    </h3>
                    {faq.highlight && (
                      <div className="text-sm text-primary font-medium mt-1">
                        {faq.highlight}
                      </div>
                    )}
                  </div>
                  
                  <div className="w-6 h-6 gradient-primary rounded-lg flex items-center justify-center flex-shrink-0">
                    {openFAQ === index ? (
                      <ChevronUp className="w-4 h-4 text-white" />
                    ) : (
                      <ChevronDown className="w-4 h-4 text-white" />
                    )}
                  </div>
                </button>

                <div 
                  className={`overflow-hidden transition-all duration-300 ${
                    openFAQ === index ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'
                  }`}
                >
                  <div className="px-6 pb-5">
                    <div className="pt-2 border-t border-border/50">
                      <p className="text-muted-foreground leading-relaxed whitespace-pre-line">
                        {faq.answer}
                      </p>
                      
                      {index === faqs.length - 1 && (
                        <div className="mt-4 p-4 bg-primary/5 border border-primary/20 rounded-lg">
                          <p className="text-sm text-primary font-medium mb-2">
                            ‚ú® –ì–æ—Ç–æ–≤—ã —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π —Å–∞–π—Ç —Å –ø–æ–º–æ—â—å—é –ò–ò?
                          </p>
                          <p className="text-sm text-muted-foreground">
                            –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –∏ —Ä–∞—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞!
                          </p>
                        </div>
                      )}
                    </div>
                  </div>
                </div>
              </div>
            ))}
          </div>

          {/* CTA */}
          <div className="fade-in-up text-center mt-12 p-8 gradient-subtle rounded-2xl">
            <h3 className="text-2xl font-bold text-foreground mb-4">
              –ù–µ –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å?
            </h3>
            <p className="text-muted-foreground mb-6">
              –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏ ‚Äî –æ—Ç–≤–µ—Ç–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ —á–∞—Å–∞ –∏ —Ä–∞—Å—Å—á–∏—Ç–∞–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
            </p>
            <Button
              onClick={handleContactClick}
              size="lg"
              className="gap-2 hover:bg-primary active:bg-primary"
            >
              <MessageCircle className="w-5 h-5" />
              –ù–∞–ø–∏—Å–∞—Ç—å —Å–µ–π—á–∞—Å
            </Button>
          </div>
        </div>
      </div>
    </section>
  );
};

export default FAQSection; 